import { Track } from 'mk8dx'
import { Embed } from './message'
import { ColoredEmbedBuilder } from '@/components/embed'

declare module 'mk8dx' {
    interface Track {
        toEmbed(): Embed
        readonly emoji: string
    }
}

Track.prototype.toEmbed = function () {
    const embed = new ColoredEmbedBuilder()
        .setTitle(`${this.abbr} ${this.abbrJa}`)
        .setDescription(`${this.fullName}\n${this.fullNameJa}`)
    if (this.id < 80)
        embed
            .setImage(`https://raw.githubusercontent.com/sheat-git/mk8dx/main/tracks/20230713/${this.id}.jpg`)
            .setFooter({
                text: 'Map: Â© Mario Kart Blog',
                iconURL: 'https://livedoor.blogimg.jp/nim_2525/imgs/1/7/17b6e83b.jpg',
            })
    else embed.setImage(`https://raw.githubusercontent.com/sheat-git/mk8dx/main/cups/${this.cup.id}.jpg`)
    return embed
}

const trackEmojiIds = [
    '1135823847283773530',
    '1135823917529968681',
    '1135823905685242001',
    '1135823914426187788',
    '1135823844419055717',
    '1135823909032300595',
    '1135823911326601287',
    '1135824146501218436',
    '1135823899163099239',
    '1135823823292342282',
    '1135823839973081149',
    '1135823848797904916',
    '1135823786843852870',
    '1135823782548877322',
    '1135823778820136982',
    '1135823876178321468',
    '1135823837934653492',
    '1135823804925497354',
    '1135823802274684978',
    '1135823813335072779',
    '1135823797065371780',
    '1135823799124754462',
    '1135823835317411840',
    '1135823789909868654',
    '1135823866560774144',
    '1135824117002682388',
    '1135823851654234183',
    '1135823889230987354',
    '1135823854313418793',
    '1135823860550348822',
    '1135823883312828426',
    '1135823857249435668',
    '1135826189387304970',
    '1135823886227882005',
    '1135823869727485962',
    '1135823896004808704',
    '1135823891642724362',
    '1135823871916900403',
    '1135823842779086879',
    '1135823879395348633',
    '1135823833480314960',
    '1135823820402475038',
    '1135823810768154664',
    '1135823806838095973',
    '1135823815167983676',
    '1135823818246586370',
    '1135823830577844306',
    '1135823793386967040',
    '1135828095190958130',
    '1135828136710373456',
    '1135828052677496935',
    '1135828049041031178',
    '1135828133476565105',
    '1135828123481559120',
    '1135828113985634376',
    '1135828087280513175',
    '1135828089138581564',
    '1135828073430925313',
    '1135828062894821429',
    '1135828140497834044',
    '1135828126434328676',
    '1135828120226771024',
    '1135828075544842290',
    '1135828118096068719',
    '1135828067768615012',
    '1135828042279833620',
    '1135828108373676032',
    '1135828084042510406',
    '1135828034935586878',
    '1135828092116545637',
    '1135828080506703892',
    '1135828106771439636',
    '1135828030045044777',
    '1135828103126597744',
    '1135828057597423647',
    '1135828147724615741',
    '1135828045509427260',
    '1135828070436196382',
    '1135828144402731010',
    '1135828128741208105',
    '1135828032259625060',
    '1135828054552367204',
    '1135828078384402432',
    '1135828110827327639',
    '1135828066095091742',
    '1135828131228418049',
    '1135828061259055165',
    '1135828216452493352',
]

Object.defineProperty(Track.prototype, 'emoji', {
    get: function () {
        if (this.id >= trackEmojiIds.length) return '<:unknown:1135831544523669544>'
        const emojiId = trackEmojiIds[this.id]
        return `<:${this.abbr}:${emojiId}>`
    },
})
